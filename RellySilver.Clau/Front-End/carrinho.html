<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho - RellI Silver</title>
    <link rel="stylesheet" href="carrinho.css">
</head>
<body>
    <header>
        <div class="top-bar">
            ‚ú® Frete Gr√°tis para compras acima de R$ 500 | Parcele em at√© 12x sem juros
        </div>
        <nav>
            <div class="logo" onclick="window.location.href='index.html'">RELLI SILVER</div>
            <ul class="nav-links">
                <li><a href="index.html">In√≠cio</a></li>
                <li><a href="index.html#colecoes">Cole√ß√µes</a></li>
                <li><a href="index.html#produtos">Produtos</a></li>
                <li><a href="index.html#sobre">Sobre</a></li>
                <li><a href="index.html#contato">Contato</a></li>
            </ul>
            <div class="nav-icons">
                <button class="icon-btn" id="searchBtn">üîç</button>
                <button class="icon-btn" id="cartBtn">
                    üõí
                    <span class="cart-count" id="cartCount">0</span>
                </button>
            </div>
        </nav>
    </header>

    <div class="breadcrumb">
        <a href="index.html">In√≠cio</a> / <span>Carrinho de Compras</span>
    </div>

    <div class="cart-container">
        <div class="cart-items">
            <div class="cart-header">
                <h1>Meu Carrinho</h1>
                <button class="clear-cart" id="clearCart">üóëÔ∏è Limpar Carrinho</button>
            </div>
            <div id="cartItemsList">
                <!-- Items ser√£o carregados aqui pelo JavaScript -->
            </div>
        </div>

        <div class="cart-summary">
            <h2 class="summary-title">Resumo do Pedido</h2>
            
            <div class="summary-row">
                <span>Subtotal (<span id="itemCount">0</span> itens)</span>
                <span id="subtotal">R$ 0,00</span>
            </div>
            
            <div class="summary-row">
                <span>Frete</span>
                <span id="shipping">Gr√°tis</span>
            </div>
            
            <div class="summary-row" id="discountRow" style="display: none;">
                <span>Desconto</span>
                <span id="discount" style="color: var(--green);">- R$ 0,00</span>
            </div>

            <div class="discount-code">
                <h4>Cupom de Desconto</h4>
                <div class="discount-input">
                    <input type="text" id="couponInput" placeholder="Digite o cupom">
                    <button onclick="applyCoupon()">Aplicar</button>
                </div>
                <small style="color: var(--gray); margin-top: 8px; display: block;">
                    Experimente: RELLI10 ou PRIMEIRA15
                </small>
            </div>
            
            <div class="summary-row total">
                <span>Total</span>
                <span id="total">R$ 0,00</span>
            </div>

            <div class="whatsapp-info">
                <div class="whatsapp-icon">üí¨</div>
                <p>Para finalizar sua compra, voc√™ ser√° direcionado ao nosso WhatsApp onde um de nossos consultores ir√° atend√™-lo!</p>
            </div>

            <button class="checkout-btn" onclick="sendToWhatsApp()">
                üì± Enviar Pedido via WhatsApp
            </button>
            <a href="index.html#produtos" class="continue-shopping">Continuar Comprando</a>

            <div class="security-badges">
                <div class="badge">
                    <div class="badge-icon">üí¨</div>
                    <div>Atendimento Personalizado</div>
                </div>
                <div class="badge">
                    <div class="badge-icon">üöö</div>
                    <div>Entrega R√°pida</div>
                </div>
                <div class="badge">
                    <div class="badge-icon">‚Ü©Ô∏è</div>
                    <div>Troca Gr√°tis</div>
                </div>
            </div>
        </div>
    </div>

    <div class="suggested-products">
        <h2 class="suggested-title">Voc√™ Tamb√©m Pode Gostar</h2>
        <div class="product-carousel" id="suggestedProducts"></div>
    </div>

    <footer id="contato">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Relli Silver</h3>
                <p>Joalheria de luxo com tradi√ß√£o e qualidade desde 1993.</p>
            </div>
            <div class="footer-section">
                <h3>Contato</h3>
                <p>üìû (11) 3456-7890</p>
                <p>üìß contato@rellysilver.com.br</p>
                <p>üìç Av. Paulista, 1000 - S√£o Paulo, SP</p>
            </div>
            <div class="footer-section">
                <h3>Atendimento</h3>
                <a href="#">Segunda a Sexta: 9h √†s 18h</a>
                <a href="#">S√°bado: 10h √†s 16h</a>
                <a href="#">Whatsapp: (11) 98765-4321</a>
            </div>
            <div class="footer-section">
                <h3>Links √öteis</h3>
                <a href="#">Pol√≠tica de Privacidade</a>
                <a href="#">Termos de Uso</a>
                <a href="#">Trocas e Devolu√ß√µes</a>
                <a href="#">Formas de Pagamento</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 RellI Silver. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        // Configura√ß√£o do WhatsApp (altere para o n√∫mero da sua loja)
        const WHATSAPP_NUMBER = '5565992551779'; // Formato: c√≥digo pa√≠s + DDD + n√∫mero

        // Carregar carrinho
        let cart = JSON.parse(localStorage.getItem('relliCart')) || [];
        let appliedDiscount = 0;

        // Produtos sugeridos de exemplo
        const suggestedProducts = [
            { id: 101, name: 'Anel Solit√°rio Diamante', price: 2850, image: 'https://via.placeholder.com/250x250/c18e3f/ffffff?text=Anel' },
            { id: 102, name: 'Brinco Argola Ouro', price: 1200, image: 'https://via.placeholder.com/250x250/c18e3f/ffffff?text=Brinco' },
            { id: 103, name: 'Corrente Veneziana', price: 980, image: 'https://via.placeholder.com/250x250/c18e3f/ffffff?text=Corrente' },
            { id: 104, name: 'Pingente Cora√ß√£o', price: 650, image: 'https://via.placeholder.com/250x250/c18e3f/ffffff?text=Pingente' }
        ];

        function updateCart() {
            const cartItemsList = document.getElementById('cartItemsList');
            const cartCount = document.getElementById('cartCount');
            const itemCount = document.getElementById('itemCount');
            
            if (cart.length === 0) {
                cartItemsList.innerHTML = `
                    <div class="empty-cart">
                        <div class="empty-cart-icon">üõí</div>
                        <h2>Seu carrinho est√° vazio</h2>
                        <p>Adicione produtos incr√≠veis da nossa cole√ß√£o!</p>
                        <a href="index.html#produtos" class="btn-primary">Ver Produtos</a>
                    </div>
                `;
            } else {
                cartItemsList.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}" class="item-image">
                        <div class="item-details">
                            <div class="item-name">${item.name}</div>
                            <div class="item-price">R$ ${item.price.toFixed(2)}</div>
                            ${item.material ? `<div class="item-meta">Material: ${item.material}</div>` : ''}
                        </div>
                        <div class="item-actions">
                            <div class="quantity-control">
                                <button class="qty-btn" onclick="updateQuantity(${item.id}, ${item.quantity - 1})" ${item.quantity <= 1 ? 'disabled' : ''}>-</button>
                                <span class="quantity">${item.quantity}</span>
                                <button class="qty-btn" onclick="updateQuantity(${item.id}, ${item.quantity + 1})">+</button>
                            </div>
                            <div class="item-total">R$ ${(item.price * item.quantity).toFixed(2)}</div>
                            <button class="remove-item" onclick="removeItem(${item.id})">Remover</button>
                        </div>
                    </div>
                `).join('');
            }

            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            itemCount.textContent = totalItems;

            updateSummary();
        }

        function updateQuantity(id, newQty) {
            if (newQty < 1) return;
            cart = cart.map(item => 
                item.id === id ? { ...item, quantity: newQty } : item
            );
            localStorage.setItem('relliCart', JSON.stringify(cart));
            updateCart();
        }

        function removeItem(id) {
            if (confirm('Deseja remover este item do carrinho?')) {
                cart = cart.filter(item => item.id !== id);
                localStorage.setItem('relliCart', JSON.stringify(cart));
                updateCart();
            }
        }

        document.getElementById('clearCart').addEventListener('click', function() {
            if (confirm('Deseja limpar todo o carrinho?')) {
                cart = [];
                appliedDiscount = 0;
                localStorage.setItem('relliCart', JSON.stringify(cart));
                document.getElementById('couponInput').value = '';
                document.getElementById('discountRow').style.display = 'none';
                updateCart();
            }
        });

        function updateSummary() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const discountAmount = subtotal * appliedDiscount;
            const shipping = subtotal >= 500 ? 0 : 50;
            const total = subtotal - discountAmount + shipping;

            document.getElementById('subtotal').textContent = `R$ ${subtotal.toFixed(2)}`;
            document.getElementById('shipping').textContent = shipping === 0 ? 'Gr√°tis' : `R$ ${shipping.toFixed(2)}`;
            document.getElementById('discount').textContent = `- R$ ${discountAmount.toFixed(2)}`;
            document.getElementById('total').textContent = `R$ ${total.toFixed(2)}`;

            if (discountAmount > 0) {
                document.getElementById('discountRow').style.display = 'flex';
            }
        }

        function applyCoupon() {
            const couponInput = document.getElementById('couponInput');
            const code = couponInput.value.toUpperCase().trim();

            if (code === 'RELLI10') {
                appliedDiscount = 0.10;
                alert('‚ú® Cupom aplicado! 10% de desconto');
            } else if (code === 'PRIMEIRA15') {
                appliedDiscount = 0.15;
                alert('‚ú® Cupom aplicado! 15% de desconto');
            } else if (code === '') {
                alert('‚ö†Ô∏è Digite um cupom v√°lido');
                return;
            } else {
                alert('‚ùå Cupom inv√°lido');
                appliedDiscount = 0;
            }

            updateSummary();
        }

        function sendToWhatsApp() {
            if (cart.length === 0) {
                alert('‚ö†Ô∏è Seu carrinho est√° vazio! Adicione produtos antes de continuar.');
                return;
            }

            // Construir mensagem
            let message = '*üõçÔ∏è Pedido - RellI Silver*\n\n';
            message += '*Itens do Pedido:*\n';
            
            cart.forEach((item, index) => {
                message += `\n${index + 1}. *${item.name}*\n`;
                message += `   ‚Ä¢ Quantidade: ${item.quantity}\n`;
                message += `   ‚Ä¢ Pre√ßo unit√°rio: R$ ${item.price.toFixed(2)}\n`;
                if (item.material) {
                    message += `   ‚Ä¢ Material: ${item.material}\n`;
                }
                message += `   ‚Ä¢ Subtotal: R$ ${(item.price * item.quantity).toFixed(2)}\n`;
            });

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const discountAmount = subtotal * appliedDiscount;
            const shipping = subtotal >= 500 ? 0 : 50;
            const total = subtotal - discountAmount + shipping;

            message += '\n' + '‚îÄ'.repeat(30) + '\n';
            message += `*Subtotal:* R$ ${subtotal.toFixed(2)}\n`;
            
            if (discountAmount > 0) {
                message += `*Desconto:* -R$ ${discountAmount.toFixed(2)}\n`;
            }
            
            message += `*Frete:* ${shipping === 0 ? 'Gr√°tis' : 'R$ ' + shipping.toFixed(2)}\n`;
            message += `*TOTAL:* R$ ${total.toFixed(2)}\n\n`;
            message += '_Gostaria de finalizar este pedido!_ ‚ú®';

            // Codificar mensagem para URL
            const encodedMessage = encodeURIComponent(message);
            
            // Criar link do WhatsApp
            const whatsappURL = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`;
            
            // Abrir WhatsApp
            window.open(whatsappURL, '_blank');
        }

        function loadSuggestedProducts() {
            const container = document.getElementById('suggestedProducts');
            container.innerHTML = suggestedProducts.map(product => `
                <div class="product-card" onclick="window.location.href='index.html#produtos'">
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">R$ ${product.price.toFixed(2)}</div>
                    </div>
                </div>
            `).join('');
        }

        // Inicializar
        updateCart();
        loadSuggestedProducts();
    </script>
</body>
</html>